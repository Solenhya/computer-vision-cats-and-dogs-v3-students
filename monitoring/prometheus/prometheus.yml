# ═══════════════════════════════════════════════════════════════════════════════
# 📊 PROMETHEUS CONFIGURATION - Collecte de métriques MLOps
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# 🌍 CONFIGURATION GLOBALE
# ─────────────────────────────────────────────────────────────────────────────
global:
  scrape_interval: 15s
  evaluation_interval: 15s

# ═══════════════════════════════════════════════════════════════════════════
# 🎯 SCRAPE CONFIGS - Définition des targets à monitorer
# ═══════════════════════════════════════════════════════════════════════════
scrape_configs:
  
  # ─────────────────────────────────────────────────────────────────────────
  # 📊 JOB 1 : Application FastAPI (métriques métier)
  # ─────────────────────────────────────────────────────────────────────────
  - job_name: 'cv-cats-dogs'
    static_configs:
      - targets: ['cv_app:8000']
    metrics_path: '/metrics'
    scrape_interval: 10s

  # ─────────────────────────────────────────────────────────────────────────
  # 🔍 JOB 2 : Auto-monitoring Prometheus
  # ─────────────────────────────────────────────────────────────────────────
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # ─────────────────────────────────────────────────────────────────────────
  # 🗄️ JOB 3 : PostgreSQL (monitoring optionnel)
  # ─────────────────────────────────────────────────────────────────────────
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres:5432']